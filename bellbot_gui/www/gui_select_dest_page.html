<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>AAF Bellbot</title>
  <link rel="stylesheet" href="docsupport/style.css">
  <link rel="stylesheet" href="docsupport/prism.css">
  <link rel="stylesheet" href="chosen.css">
  <style type="text/css" media="all">
    /* fix rtl for demo */
    .chosen-rtl .chosen-drop { left: -9000px; }
  </style>
<script type="text/javascript" src="http://cdn.robotwebtools.org/EventEmitter2/current/eventemitter2.min.js"></script>
<script type="text/javascript" src="http://cdn.robotwebtools.org/roslibjs/current/roslib.min.js"></script>
<script type="text/javascript" type="text/javascript">
  // Connecting to ROS
  // -----------------

  var ros = new ROSLIB.Ros({
    url : 'ws://localhost:9090'
  });

  ros.on('connection', function() {
    console.log('Connected to websocket server.');
  });

  ros.on('error', function(error) {
    console.log('Error connecting to websocket server: ', error);
  });

  ros.on('close', function() {
    console.log('Connection to websocket server closed.');
  });
</script>
</head>

<body>
  <form>
    <div id="container">
      <div id="content">
      <img src="hdb_logo.jpg" alt="AAF logo">
      <h2>AAF Bellbot</h2>
      <p><em>Welcome to AAF. My name is Jeeves and I will be your personal bellbot for today. Please select your desired destination from the list below and then click the button when you are ready to go.</em></p>
      <div class="side-by-side clearfix">
        <div>
          <select id="destinations" onchange="getval(this);" data-placeholder="Select your destination" style="width:350px;" class="chosen-select" tabindex="5">
            <option value=""></option>
<optgroup label="Meeting Rooms">
<option desc="Childrens Playground">KinderGarten</option>
<option desc="Main Meeting Room">Konferenzraum - Meeting Room</option>
<option desc="Beware Monkeys tiping pages">Meeting Room 2</option>
<option desc="Resting area for Walking Group">Resting Area</option>
<option desc="Walking Group Assembly point">Therapist Office</option>
</optgroup>
<optgroup label="office">
<option desc="Offices of Care Center">2nd Floor offices</option>
<option desc="WheelChair Assesment">EG-W-019</option>
<option desc="3rd floor Offices">office Floor</option>
</optgroup>
          </select>
        </div>
	<div>
	<!-- <button id="button1">Click to go to selected destination</button> -->
	<div id="button1" align="center" style="border: 1px solid; border-color: #a8a6a3; border-radius: 5px; cursor:pointer;">Click to go to selected destination</div>
	</div>
      </div>

<h2>Information</h2>
 <!--<input type="text" id="info" style="width: 600px; height: 300px;" readonly>-->
<p id=info></p>

    </div>
  </div>


<!--<p id="demo"></p>-->

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js" type="text/javascript"></script>
  <script src="chosen.jquery.js" type="text/javascript"></script>
  <script src="docsupport/prism.js" type="text/javascript" charset="utf-8"></script>
  <script type="text/javascript">
    var config = {
      '.chosen-select'           : {},
      '.chosen-select-deselect'  : {allow_single_deselect:true},
      '.chosen-select-no-single' : {disable_search_threshold:10},
      '.chosen-select-no-results': {no_results_text:'Oops, nothing found!'},
      '.chosen-select-width'     : {width:"95%"}
    }
    for (var selector in config) {
      $(selector).chosen(config[selector]);
    }
  </script>

<script type="text/javascript">
    function getval(sel) {
//	var textbox = document.getElementById('info');
//	textbox.value = "Some useful info about " + sel.value
//	msg = $("#destinations_info option[value=sel.value]").text()
//	document.getElementById("info").innerHTML = "Some useful info about " + sel.value
	document.getElementById("info").innerHTML = $('option:selected', sel).attr('desc');
    }
</script>

<script type="text/javascript">// <![CDATA[
(function($){
$(document).ready(function(){
  $('#button1').click(function(){
    dest = $('#destinations :selected').text()
    destv = $('#destinations :selected').val()
    if (dest == "") {
    	alert( 'Please select a destination from the list' );
    } else {
	foo(dest, destv)
    }
  });
});
})(jQuery);
// ]]&gt;</script>


<script type="text/javascript">
function foo(dest, destv) {
//alert('Destination is: ' + dest + " - " + destv)
//alert('Destination is: ' + dest)
  // Publishing a Topic
  // ------------------

  var goto_dest_topic = new ROSLIB.Topic({
    ros : ros,
    name : '/bellbot_gui/sel_dest',
    messageType : 'std_msgs/String'
  });

  var dest_msg = new ROSLIB.Message({
    data : destv
  });
  goto_dest_topic.publish(dest_msg);
}
</script>


</form>
</body>
</html>
